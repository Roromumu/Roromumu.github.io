<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF14 ä»™äººå·¨çå½©é¸è™Ÿé æ¸¬å™¨ - é›²ç«¯å…±äº«ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .cloud-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
            margin-left: 10px;
        }

        .sync-status {
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-weight: bold;
        }

        .sync-status.syncing {
            background: #fff3cd;
            color: #856404;
        }

        .sync-status.synced {
            background: #d4edda;
            color: #155724;
        }

        .sync-status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .section h2 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .number-input {
            width: 60px;
            height: 60px;
            font-size: 24px;
            text-align: center;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-weight: bold;
        }

        .number-input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-number {
            font-size: 20px;
            font-weight: bold;
            color: #764ba2;
            letter-spacing: 3px;
        }

        .history-date {
            font-size: 12px;
            color: #999;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-count {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .stat-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }

        .recommendation {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 3px solid #667eea;
        }

        .recommendation h3 {
            color: #764ba2;
            margin-bottom: 10px;
        }

        .recommended-numbers {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .rec-number {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .strategy-select {
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #667eea;
            font-size: 16px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 400px;
        }

        .info-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .info-box p {
            color: #856404;
            line-height: 1.6;
        }

        .position-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .position-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #667eea;
        }

        .position-title {
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 10px;
            text-align: center;
        }

        .position-numbers {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .position-number-item {
            display: flex;
            justify-content: space-between;
            padding: 5px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .total-records {
            text-align: center;
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .position-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ° FF14 ä»™äººå·¨çå½©é¸è™Ÿé æ¸¬å™¨<span class="cloud-badge">â˜ï¸ é›²ç«¯å…±äº«ç‰ˆ</span></h1>
        <p class="subtitle">åŸºæ–¼æ­·å²æ•¸æ“šçš„æ™ºèƒ½é¸è™Ÿæ¨è–¦ç³»çµ± - æ‰€æœ‰ç©å®¶å…±åŒç¶­è­·</p>

        <div id="syncStatus" class="sync-status syncing">ğŸ”„ æ­£åœ¨è¼‰å…¥é›²ç«¯æ•¸æ“š...</div>

        <!-- è¼¸å…¥æ­·å²é–‹ç -->
        <div class="section">
            <h2>ğŸ“ æ–°å¢é–‹çè™Ÿç¢¼ (å…¨é«”å…±äº«)</h2>
            <div class="input-group">
                <input type="number" class="number-input" id="digit1" min="0" max="9" placeholder="0">
                <input type="number" class="number-input" id="digit2" min="0" max="9" placeholder="0">
                <input type="number" class="number-input" id="digit3" min="0" max="9" placeholder="0">
                <input type="number" class="number-input" id="digit4" min="0" max="9" placeholder="0">
                <button onclick="addHistory()" id="addBtn">â• æ–°å¢åˆ°é›²ç«¯</button>
                <button onclick="refreshData()" id="refreshBtn">ğŸ”„ é‡æ–°æ•´ç†</button>
            </div>
            <p style="color: #666; font-size: 0.9em;">ğŸ’¡ ä½ æ–°å¢çš„è¨˜éŒ„æœƒç«‹å³åŒæ­¥åˆ°é›²ç«¯,æ‰€æœ‰äººéƒ½èƒ½çœ‹åˆ°!</p>
        </div>

        <!-- æ­·å²è¨˜éŒ„ -->
        <div class="section">
            <h2>ğŸ“š æ­·å²é–‹çè¨˜éŒ„</h2>
            <div class="total-records" id="totalRecords">å…± 0 ç­†è¨˜éŒ„</div>
            <div class="history-list" id="historyList"></div>
        </div>

        <!-- çµ±è¨ˆåˆ†æ -->
        <div class="section">
            <h2>ğŸ“Š æ•¸å­—å‡ºç¾é »ç‡çµ±è¨ˆ</h2>
            <div class="stats-grid" id="statsGrid"></div>
        </div>

        <!-- ä½ç½®çµ±è¨ˆ -->
        <div class="section">
            <h2>ğŸ¯ å„ä½ç½®æ•¸å­—åˆ†æ</h2>
            <div class="position-stats" id="positionStats"></div>
        </div>

        <!-- é¸è™Ÿæ¨è–¦ -->
        <div class="section">
            <h2>ğŸ’¡ æ™ºèƒ½é¸è™Ÿæ¨è–¦</h2>
            <select class="strategy-select" id="strategySelect" onchange="generateRecommendation()">
                <option value="hot">ç†±é–€è™Ÿç¢¼ç­–ç•¥ - é¸æ“‡å‡ºç¾æœ€é »ç¹çš„æ•¸å­—</option>
                <option value="cold">å†·é–€è™Ÿç¢¼ç­–ç•¥ - é¸æ“‡è¼ƒå°‘å‡ºç¾çš„æ•¸å­—</option>
                <option value="balanced">å¹³è¡¡ç­–ç•¥ - æ··åˆç†±é–€å’Œå†·é–€æ•¸å­—</option>
                <option value="position">ä½ç½®å„ªåŒ–ç­–ç•¥ - åŸºæ–¼å„ä½ç½®çš„ç†±é–€æ•¸å­—</option>
                <option value="random">éš¨æ©Ÿç­–ç•¥ - å®Œå…¨éš¨æ©Ÿé¸è™Ÿ</option>
            </select>
            <button onclick="generateRecommendation()">ğŸ² ç”Ÿæˆæ¨è–¦è™Ÿç¢¼</button>
            <div id="recommendationArea"></div>
            <div class="info-box">
                <p><strong>ğŸ’¡ æé†’ï¼š</strong>ä»™äººå·¨çå½©æ˜¯å®Œå…¨éš¨æ©Ÿçš„éŠæˆ²ï¼Œä»»ä½•é æ¸¬æ–¹æ³•éƒ½ç„¡æ³•çœŸæ­£æé«˜ä¸­çç‡ã€‚æ­¤å·¥å…·åƒ…åŸºæ–¼æ­·å²æ•¸æ“šæä¾›è¶£å‘³æ€§çš„é¸è™Ÿåƒè€ƒï¼Œè«‹ç†æ€§éŠæˆ²ï¼</p>
            </div>
        </div>
    </div>

    <script>
        // GitHub è¨­å®š
        const GITHUB_CONFIG = {
            owner: 'Roromumu',
            repo: 'Roromumu.github.io',
            path: 'cactpot_history.json',
            token: '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'
        };

        let history = [];
        let fileSha = null; // ç”¨æ–¼è¿½è¹¤æª”æ¡ˆç‰ˆæœ¬

        // é é¢è¼‰å…¥æ™‚å¾ GitHub è®€å–è³‡æ–™
        window.onload = function() {
            loadFromGitHub();
            setupInputHandlers();
        };

        // è¨­å®šè¼¸å…¥æ¡†è‡ªå‹•è·³è½‰
        function setupInputHandlers() {
            document.querySelectorAll('.number-input').forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length >= 1) {
                        const nextInput = document.querySelectorAll('.number-input')[index + 1];
                        if (nextInput) {
                            nextInput.focus();
                        }
                    }
                });
            });
        }

        // æ›´æ–°åŒæ­¥ç‹€æ…‹
        function updateSyncStatus(status, message) {
            const statusDiv = document.getElementById('syncStatus');
            statusDiv.className = 'sync-status ' + status;
            statusDiv.innerHTML = message;
        }

        // å¾ GitHub è¼‰å…¥è³‡æ–™
        async function loadFromGitHub() {
            try {
                updateSyncStatus('syncing', 'ğŸ”„ æ­£åœ¨å¾é›²ç«¯è¼‰å…¥æ•¸æ“š...');
                
                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.path}`,
                    {
                        headers: {
                            'Authorization': `token ${GITHUB_CONFIG.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (response.status === 404) {
                    // æª”æ¡ˆä¸å­˜åœ¨ï¼Œå‰µå»ºåˆå§‹æª”æ¡ˆ
                    await createInitialFile();
                    return;
                }

                if (!response.ok) {
                    throw new Error('è¼‰å…¥å¤±æ•—: ' + response.status);
                }

                const data = await response.json();
                fileSha = data.sha;
                
                // è§£ç¢¼ base64 å…§å®¹
                const content = atob(data.content);
                history = JSON.parse(content);
                
                updateDisplay();
                updateSyncStatus('synced', 'âœ… å·²åŒæ­¥ - å…± ' + history.length + ' ç­†è¨˜éŒ„ (æœ€å¾Œæ›´æ–°: ' + new Date().toLocaleString('zh-TW') + ')');
            } catch (error) {
                console.error('è¼‰å…¥éŒ¯èª¤:', error);
                updateSyncStatus('error', 'âŒ è¼‰å…¥å¤±æ•—: ' + error.message);
            }
        }

        // å‰µå»ºåˆå§‹æª”æ¡ˆ
        async function createInitialFile() {
            try {
                const content = btoa(JSON.stringify([]));
                
                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.path}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${GITHUB_CONFIG.token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'åˆå§‹åŒ–ä»™äººå·¨çå½©æ­·å²è¨˜éŒ„',
                            content: content
                        })
                    }
                );

                if (!response.ok) {
                    throw new Error('å‰µå»ºæª”æ¡ˆå¤±æ•—: ' + response.status);
                }

                const data = await response.json();
                fileSha = data.content.sha;
                history = [];
                
                updateDisplay();
                updateSyncStatus('synced', 'âœ… å·²å‰µå»ºæ–°çš„é›²ç«¯è¨˜éŒ„æª”æ¡ˆ');
            } catch (error) {
                console.error('å‰µå»ºæª”æ¡ˆéŒ¯èª¤:', error);
                updateSyncStatus('error', 'âŒ å‰µå»ºæª”æ¡ˆå¤±æ•—: ' + error.message);
            }
        }

        // å„²å­˜åˆ° GitHub
        async function saveToGitHub() {
            try {
                updateSyncStatus('syncing', 'ğŸ”„ æ­£åœ¨åŒæ­¥åˆ°é›²ç«¯...');
                disableButtons(true);

                const content = btoa(JSON.stringify(history, null, 2));
                
                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.path}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${GITHUB_CONFIG.token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'æ–°å¢ä»™äººå·¨çå½©é–‹çè¨˜éŒ„',
                            content: content,
                            sha: fileSha
                        })
                    }
                );

                if (!response.ok) {
                    throw new Error('åŒæ­¥å¤±æ•—: ' + response.status);
                }

                const data = await response.json();
                fileSha = data.content.sha;
                
                updateSyncStatus('synced', 'âœ… åŒæ­¥æˆåŠŸ! (æœ€å¾Œæ›´æ–°: ' + new Date().toLocaleString('zh-TW') + ')');
                disableButtons(false);
            } catch (error) {
                console.error('å„²å­˜éŒ¯èª¤:', error);
                updateSyncStatus('error', 'âŒ åŒæ­¥å¤±æ•—: ' + error.message);
                disableButtons(false);
            }
        }

        // ç¦ç”¨/å•Ÿç”¨æŒ‰éˆ•
        function disableButtons(disabled) {
            document.getElementById('addBtn').disabled = disabled;
            document.getElementById('refreshBtn').disabled = disabled;
        }

        // æ–°å¢æ­·å²è¨˜éŒ„
        async function addHistory() {
            const d1 = document.getElementById('digit1').value;
            const d2 = document.getElementById('digit2').value;
            const d3 = document.getElementById('digit3').value;
            const d4 = document.getElementById('digit4').value;

            if (d1 === '' || d2 === '' || d3 === '' || d4 === '') {
                alert('è«‹è¼¸å…¥å®Œæ•´çš„4ä½æ•¸å­—ï¼');
                return;
            }

            const number = d1 + d2 + d3 + d4;
            const record = {
                number: number,
                date: new Date().toISOString()
            };
            
            history.unshift(record);
            
            // æ¸…ç©ºè¼¸å…¥æ¡†
            document.getElementById('digit1').value = '';
            document.getElementById('digit2').value = '';
            document.getElementById('digit3').value = '';
            document.getElementById('digit4').value = '';
            document.getElementById('digit1').focus();

            updateDisplay();
            await saveToGitHub();
        }

        // é‡æ–°æ•´ç†è³‡æ–™
        async function refreshData() {
            await loadFromGitHub();
        }

        // æ›´æ–°é¡¯ç¤º
        function updateDisplay() {
            updateHistoryList();
            updateStats();
            updatePositionStats();
        }

        // æ›´æ–°æ­·å²åˆ—è¡¨
        function updateHistoryList() {
            const listDiv = document.getElementById('historyList');
            const totalDiv = document.getElementById('totalRecords');
            
            totalDiv.textContent = `å…± ${history.length} ç­†è¨˜éŒ„`;

            if (history.length === 0) {
                listDiv.innerHTML = '<p style="color: #666;">å°šç„¡æ­·å²è¨˜éŒ„ï¼Œæˆç‚ºç¬¬ä¸€å€‹æ–°å¢è¨˜éŒ„çš„ç©å®¶ï¼</p>';
                return;
            }

            listDiv.innerHTML = history.map((record) => {
                const date = new Date(record.date);
                const dateStr = date.toLocaleDateString('zh-TW') + ' ' + date.toLocaleTimeString('zh-TW', {hour: '2-digit', minute: '2-digit'});
                return `
                    <div class="history-item">
                        <div>
                            <div class="history-number">${record.number}</div>
                            <div class="history-date">${dateStr}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ›´æ–°çµ±è¨ˆæ•¸æ“š
        function updateStats() {
            const statsDiv = document.getElementById('statsGrid');
            
            if (history.length === 0) {
                statsDiv.innerHTML = '<p style="color: #666; grid-column: 1/-1;">éœ€è¦è‡³å°‘ä¸€ç­†æ­·å²è¨˜éŒ„æ‰èƒ½é¡¯ç¤ºçµ±è¨ˆ</p>';
                return;
            }

            const counts = {};
            for (let i = 0; i <= 9; i++) {
                counts[i] = 0;
            }

            history.forEach(record => {
                for (let digit of record.number) {
                    counts[digit]++;
                }
            });

            const maxCount = Math.max(...Object.values(counts));

            statsDiv.innerHTML = Object.entries(counts)
                .map(([num, count]) => {
                    const percentage = maxCount > 0 ? (count / maxCount) * 100 : 0;
                    return `
                        <div class="stat-box">
                            <div class="stat-number">${num}</div>
                            <div class="stat-count">${count} æ¬¡</div>
                            <div class="stat-bar">
                                <div class="stat-bar-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                    `;
                })
                .join('');
        }

        // æ›´æ–°ä½ç½®çµ±è¨ˆ
        function updatePositionStats() {
            const positionDiv = document.getElementById('positionStats');
            
            if (history.length === 0) {
                positionDiv.innerHTML = '<p style="color: #666; grid-column: 1/-1;">éœ€è¦è‡³å°‘ä¸€ç­†æ­·å²è¨˜éŒ„æ‰èƒ½é¡¯ç¤ºä½ç½®åˆ†æ</p>';
                return;
            }

            const positions = [{}, {}, {}, {}];
            
            history.forEach(record => {
                for (let i = 0; i < 4; i++) {
                    const digit = record.number[i];
                    positions[i][digit] = (positions[i][digit] || 0) + 1;
                }
            });

            positionDiv.innerHTML = positions.map((pos, index) => {
                const sorted = Object.entries(pos)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 5);
                
                return `
                    <div class="position-box">
                        <div class="position-title">ç¬¬ ${index + 1} ä½</div>
                        <div class="position-numbers">
                            ${sorted.map(([num, count]) => `
                                <div class="position-number-item">
                                    <span style="font-weight: bold; color: #667eea;">${num}</span>
                                    <span style="color: #666;">${count}æ¬¡</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ç”Ÿæˆæ¨è–¦è™Ÿç¢¼
        function generateRecommendation() {
            const strategy = document.getElementById('strategySelect').value;
            const recArea = document.getElementById('recommendationArea');

            if (history.length === 0 && strategy !== 'random') {
                alert('è«‹å…ˆç­‰å¾…è¼‰å…¥æ­·å²è¨˜éŒ„ï¼');
                return;
            }

            let recommended = [];
            let explanation = '';

            switch(strategy) {
                case 'hot':
                    recommended = getHotNumbers();
                    explanation = 'åŸºæ–¼ ' + history.length + ' ç­†æ­·å²æ•¸æ“šï¼Œé¸æ“‡å‡ºç¾é »ç‡æœ€é«˜çš„æ•¸å­—çµ„åˆ';
                    break;
                case 'cold':
                    recommended = getColdNumbers();
                    explanation = 'é¸æ“‡æ­·å²ä¸­è¼ƒå°‘å‡ºç¾çš„æ•¸å­—ï¼Œä¹Ÿè¨±æ˜¯æ™‚å€™è©²å®ƒå€‘å‡ºç¾äº†ï¼';
                    break;
                case 'balanced':
                    recommended = getBalancedNumbers();
                    explanation = 'æ··åˆç†±é–€å’Œå†·é–€æ•¸å­—ï¼Œå–å¾—å¹³è¡¡';
                    break;
                case 'position':
                    recommended = getPositionBasedNumbers();
                    explanation = 'æ ¹æ“šæ¯å€‹ä½ç½®æœ€å¸¸å‡ºç¾çš„æ•¸å­—é€²è¡Œçµ„åˆ';
                    break;
                case 'random':
                    recommended = getRandomNumbers();
                    explanation = 'å®Œå…¨éš¨æ©Ÿé¸æ“‡ï¼Œé é‹æ°£æ±ºå®šï¼';
                    break;
            }

            recArea.innerHTML = `
                <div class="recommendation">
                    <h3>æ¨è–¦è™Ÿç¢¼</h3>
                    <div class="recommended-numbers">
                        ${recommended.map(n => `<div class="rec-number">${n}</div>`).join('')}
                    </div>
                    <p style="text-align: center; color: #666;">${explanation}</p>
                </div>
            `;
        }

        // ç†±é–€è™Ÿç¢¼ç­–ç•¥
        function getHotNumbers() {
            const counts = {};
            for (let i = 0; i <= 9; i++) counts[i] = 0;
            
            history.forEach(record => {
                for (let digit of record.number) counts[digit]++;
            });

            const sorted = Object.entries(counts)
                .sort((a, b) => b[1] - a[1])
                .map(([num]) => num);

            return [sorted[0], sorted[1], sorted[2], sorted[3]];
        }

        // å†·é–€è™Ÿç¢¼ç­–ç•¥
        function getColdNumbers() {
            const counts = {};
            for (let i = 0; i <= 9; i++) counts[i] = 0;
            
            history.forEach(record => {
                for (let digit of record.number) counts[digit]++;
            });

            const sorted = Object.entries(counts)
                .sort((a, b) => a[1] - b[1])
                .map(([num]) => num);

            return [sorted[0], sorted[1], sorted[2], sorted[3]];
        }

        // å¹³è¡¡ç­–ç•¥
        function getBalancedNumbers() {
            const counts = {};
            for (let i = 0; i <= 9; i++) counts[i] = 0;
            
            history.forEach(record => {
                for (let digit of record.number) counts[digit]++;
            });

            const sorted = Object.entries(counts)
                .sort((a, b) => b[1] - a[1])
                .map(([num]) => num);

            return [sorted[0], sorted[4], sorted[5], sorted[9]];
        }

        // ä½ç½®å„ªåŒ–ç­–ç•¥
        function getPositionBasedNumbers() {
            const positions = [{}, {}, {}, {}];
            
            history.forEach(record => {
                for (let i = 0; i < 4; i++) {
                    const digit = record.number[i];
                    positions[i][digit] = (positions[i][digit] || 0) + 1;
                }
            });

            return positions.map(pos => {
                const sorted = Object.entries(pos)
                    .sort((a, b) => b[1] - a[1]);
                return sorted[0] ? sorted[0][0] : Math.floor(Math.random() * 10);
            });
        }

        // éš¨æ©Ÿç­–ç•¥
        function getRandomNumbers() {
            return Array.from({length: 4}, () => Math.floor(Math.random() * 10));
        }
    </script>
</body>
</html>