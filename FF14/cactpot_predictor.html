<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF14 ä»™äººå·¨çå½©é¸è™Ÿé æ¸¬å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .section h2 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .number-input {
            width: 60px;
            height: 60px;
            font-size: 24px;
            text-align: center;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-weight: bold;
        }

        .number-input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .history-item {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-number {
            font-size: 20px;
            font-weight: bold;
            color: #764ba2;
            letter-spacing: 3px;
        }

        .delete-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-count {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .stat-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }

        .recommendation {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 3px solid #667eea;
        }

        .recommendation h3 {
            color: #764ba2;
            margin-bottom: 10px;
        }

        .recommended-numbers {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .rec-number {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .strategy-select {
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #667eea;
            font-size: 16px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 400px;
        }

        .info-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .info-box p {
            color: #856404;
            line-height: 1.6;
        }

        .position-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .position-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #667eea;
        }

        .position-title {
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 10px;
            text-align: center;
        }

        .position-numbers {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .position-number-item {
            display: flex;
            justify-content: space-between;
            padding: 5px;
            background: #f8f9fa;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ° FF14 ä»™äººå·¨çå½©é¸è™Ÿé æ¸¬å™¨</h1>
        <p class="subtitle">åŸºæ–¼æ­·å²æ•¸æ“šçš„æ™ºèƒ½é¸è™Ÿæ¨è–¦ç³»çµ±</p>

        <!-- è¼¸å…¥æ­·å²é–‹ç -->
        <div class="section">
            <h2>ğŸ“ è¼¸å…¥æ­·å²é–‹çè™Ÿç¢¼</h2>
            <div class="input-group">
                <input type="number" class="number-input" id="digit1" min="0" max="9" placeholder="0">
                <input type="number" class="number-input" id="digit2" min="0" max="9" placeholder="0">
                <input type="number" class="number-input" id="digit3" min="0" max="9" placeholder="0">
                <input type="number" class="number-input" id="digit4" min="0" max="9" placeholder="0">
                <button onclick="addHistory()">â• æ–°å¢è¨˜éŒ„</button>
                <button onclick="clearHistory()" style="background: #ff4757;">ğŸ—‘ï¸ æ¸…ç©ºå…¨éƒ¨</button>
            </div>
            <div class="history-list" id="historyList"></div>
        </div>

        <!-- çµ±è¨ˆåˆ†æ -->
        <div class="section">
            <h2>ğŸ“Š æ•¸å­—å‡ºç¾é »ç‡çµ±è¨ˆ</h2>
            <div class="stats-grid" id="statsGrid"></div>
        </div>

        <!-- ä½ç½®çµ±è¨ˆ -->
        <div class="section">
            <h2>ğŸ¯ å„ä½ç½®æ•¸å­—åˆ†æ</h2>
            <div class="position-stats" id="positionStats"></div>
        </div>

        <!-- é¸è™Ÿæ¨è–¦ -->
        <div class="section">
            <h2>ğŸ’¡ æ™ºèƒ½é¸è™Ÿæ¨è–¦</h2>
            <select class="strategy-select" id="strategySelect" onchange="generateRecommendation()">
                <option value="hot">ç†±é–€è™Ÿç¢¼ç­–ç•¥ - é¸æ“‡å‡ºç¾æœ€é »ç¹çš„æ•¸å­—</option>
                <option value="cold">å†·é–€è™Ÿç¢¼ç­–ç•¥ - é¸æ“‡è¼ƒå°‘å‡ºç¾çš„æ•¸å­—</option>
                <option value="balanced">å¹³è¡¡ç­–ç•¥ - æ··åˆç†±é–€å’Œå†·é–€æ•¸å­—</option>
                <option value="position">ä½ç½®å„ªåŒ–ç­–ç•¥ - åŸºæ–¼å„ä½ç½®çš„ç†±é–€æ•¸å­—</option>
                <option value="random">çœŸéš¨æ©Ÿç­–ç•¥ - ä½¿ç”¨å¯†ç¢¼å­¸ç­‰ç´šéš¨æ©Ÿæ•¸</option>
            </select>
            <button onclick="generateRecommendation()">ğŸ² ç”Ÿæˆæ¨è–¦è™Ÿç¢¼</button>
            <div id="recommendationArea"></div>
            <div class="info-box">
                <p><strong>ğŸ’¡ æé†’ï¼š</strong>ä»™äººå·¨çå½©æ˜¯å®Œå…¨éš¨æ©Ÿçš„éŠæˆ²ï¼Œä»»ä½•é æ¸¬æ–¹æ³•éƒ½ç„¡æ³•çœŸæ­£æé«˜ä¸­çç‡ã€‚æ­¤å·¥å…·åƒ…åŸºæ–¼æ­·å²æ•¸æ“šæä¾›è¶£å‘³æ€§çš„é¸è™Ÿåƒè€ƒï¼Œè«‹ç†æ€§éŠæˆ²ï¼</p>
            </div>
        </div>
    </div>

    <script>
        // æ­·å²è¨˜éŒ„å­˜å„²
        let history = JSON.parse(localStorage.getItem('cactpotHistory') || '[]');

        // é é¢è¼‰å…¥æ™‚æ›´æ–°é¡¯ç¤º
        window.onload = function() {
            updateDisplay();
        };

        // æ·»åŠ è‡ªå‹•è·³è½‰åˆ°ä¸‹ä¸€å€‹è¼¸å…¥æ¡†
        document.querySelectorAll('.number-input').forEach((input, index) => {
            input.addEventListener('input', function() {
                if (this.value.length >= 1) {
                    const nextInput = document.querySelectorAll('.number-input')[index + 1];
                    if (nextInput) {
                        nextInput.focus();
                    }
                }
            });
        });

        // æ–°å¢æ­·å²è¨˜éŒ„
        function addHistory() {
            const d1 = document.getElementById('digit1').value;
            const d2 = document.getElementById('digit2').value;
            const d3 = document.getElementById('digit3').value;
            const d4 = document.getElementById('digit4').value;

            if (d1 === '' || d2 === '' || d3 === '' || d4 === '') {
                alert('è«‹è¼¸å…¥å®Œæ•´çš„4ä½æ•¸å­—ï¼');
                return;
            }

            const number = d1 + d2 + d3 + d4;
            history.unshift(number);
            localStorage.setItem('cactpotHistory', JSON.stringify(history));

            // æ¸…ç©ºè¼¸å…¥æ¡†
            document.getElementById('digit1').value = '';
            document.getElementById('digit2').value = '';
            document.getElementById('digit3').value = '';
            document.getElementById('digit4').value = '';
            document.getElementById('digit1').focus();

            updateDisplay();
        }

        // åˆªé™¤å–®ç­†è¨˜éŒ„
        function deleteHistory(index) {
            history.splice(index, 1);
            localStorage.setItem('cactpotHistory', JSON.stringify(history));
            updateDisplay();
        }

        // æ¸…ç©ºæ‰€æœ‰è¨˜éŒ„
        function clearHistory() {
            if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰æ­·å²è¨˜éŒ„å—ï¼Ÿ')) {
                history = [];
                localStorage.setItem('cactpotHistory', JSON.stringify(history));
                updateDisplay();
            }
        }

        // æ›´æ–°é¡¯ç¤º
        function updateDisplay() {
            updateHistoryList();
            updateStats();
            updatePositionStats();
        }

        // æ›´æ–°æ­·å²åˆ—è¡¨
        function updateHistoryList() {
            const listDiv = document.getElementById('historyList');
            if (history.length === 0) {
                listDiv.innerHTML = '<p style="color: #666;">å°šç„¡æ­·å²è¨˜éŒ„ï¼Œè«‹é–‹å§‹è¼¸å…¥é–‹çè™Ÿç¢¼</p>';
                return;
            }

            listDiv.innerHTML = history.map((num, index) => `
                <div class="history-item">
                    <span class="history-number">${num}</span>
                    <button class="delete-btn" onclick="deleteHistory(${index})">âœ•</button>
                </div>
            `).join('');
        }

        // æ›´æ–°çµ±è¨ˆæ•¸æ“š
        function updateStats() {
            const statsDiv = document.getElementById('statsGrid');
            
            if (history.length === 0) {
                statsDiv.innerHTML = '<p style="color: #666; grid-column: 1/-1;">éœ€è¦è‡³å°‘ä¸€ç­†æ­·å²è¨˜éŒ„æ‰èƒ½é¡¯ç¤ºçµ±è¨ˆ</p>';
                return;
            }

            // çµ±è¨ˆæ¯å€‹æ•¸å­—å‡ºç¾æ¬¡æ•¸
            const counts = {};
            for (let i = 0; i <= 9; i++) {
                counts[i] = 0;
            }

            history.forEach(num => {
                for (let digit of num) {
                    counts[digit]++;
                }
            });

            const maxCount = Math.max(...Object.values(counts));

            statsDiv.innerHTML = Object.entries(counts)
                .map(([num, count]) => {
                    const percentage = maxCount > 0 ? (count / maxCount) * 100 : 0;
                    return `
                        <div class="stat-box">
                            <div class="stat-number">${num}</div>
                            <div class="stat-count">${count} æ¬¡</div>
                            <div class="stat-bar">
                                <div class="stat-bar-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                    `;
                })
                .join('');
        }

        // æ›´æ–°ä½ç½®çµ±è¨ˆ
        function updatePositionStats() {
            const positionDiv = document.getElementById('positionStats');
            
            if (history.length === 0) {
                positionDiv.innerHTML = '<p style="color: #666; grid-column: 1/-1;">éœ€è¦è‡³å°‘ä¸€ç­†æ­·å²è¨˜éŒ„æ‰èƒ½é¡¯ç¤ºä½ç½®åˆ†æ</p>';
                return;
            }

            const positions = [{}, {}, {}, {}];
            
            history.forEach(num => {
                for (let i = 0; i < 4; i++) {
                    const digit = num[i];
                    positions[i][digit] = (positions[i][digit] || 0) + 1;
                }
            });

            positionDiv.innerHTML = positions.map((pos, index) => {
                const sorted = Object.entries(pos)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 5);
                
                return `
                    <div class="position-box">
                        <div class="position-title">ç¬¬ ${index + 1} ä½</div>
                        <div class="position-numbers">
                            ${sorted.map(([num, count]) => `
                                <div class="position-number-item">
                                    <span style="font-weight: bold; color: #667eea;">${num}</span>
                                    <span style="color: #666;">${count}æ¬¡</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ç”Ÿæˆæ¨è–¦è™Ÿç¢¼
        function generateRecommendation() {
            const strategy = document.getElementById('strategySelect').value;
            const recArea = document.getElementById('recommendationArea');

            if (history.length === 0 && strategy !== 'random') {
                alert('è«‹å…ˆè¼¸å…¥ä¸€äº›æ­·å²è¨˜éŒ„ï¼');
                return;
            }

            let recommended = [];
            let explanation = '';

            switch(strategy) {
                case 'hot':
                    recommended = getHotNumbers();
                    explanation = 'åŸºæ–¼æ­·å²æ•¸æ“šï¼Œé¸æ“‡å‡ºç¾é »ç‡æœ€é«˜çš„æ•¸å­—çµ„åˆ';
                    break;
                case 'cold':
                    recommended = getColdNumbers();
                    explanation = 'é¸æ“‡æ­·å²ä¸­è¼ƒå°‘å‡ºç¾çš„æ•¸å­—ï¼Œä¹Ÿè¨±æ˜¯æ™‚å€™è©²å®ƒå€‘å‡ºç¾äº†ï¼';
                    break;
                case 'balanced':
                    recommended = getBalancedNumbers();
                    explanation = 'æ··åˆç†±é–€å’Œå†·é–€æ•¸å­—ï¼Œå–å¾—å¹³è¡¡';
                    break;
                case 'position':
                    recommended = getPositionBasedNumbers();
                    explanation = 'æ ¹æ“šæ¯å€‹ä½ç½®æœ€å¸¸å‡ºç¾çš„æ•¸å­—é€²è¡Œçµ„åˆ';
                    break;
                case 'random':
                    recommended = getRandomNumbers();
                    explanation = 'ä½¿ç”¨å¯†ç¢¼å­¸ç­‰ç´šçš„çœŸéš¨æ©Ÿæ•¸ç”Ÿæˆå™¨,æ›´æ¥è¿‘çœŸæ­£çš„éš¨æ©Ÿ!';
                    break;
            }

            recArea.innerHTML = `
                <div class="recommendation">
                    <h3>æ¨è–¦è™Ÿç¢¼</h3>
                    <div class="recommended-numbers">
                        ${recommended.map(n => `<div class="rec-number">${n}</div>`).join('')}
                    </div>
                    <p style="text-align: center; color: #666;">${explanation}</p>
                </div>
            `;
        }

        // ç†±é–€è™Ÿç¢¼ç­–ç•¥
        function getHotNumbers() {
            const counts = {};
            for (let i = 0; i <= 9; i++) counts[i] = 0;
            
            history.forEach(num => {
                for (let digit of num) counts[digit]++;
            });

            const sorted = Object.entries(counts)
                .sort((a, b) => b[1] - a[1])
                .map(([num]) => num);

            return [sorted[0], sorted[1], sorted[2], sorted[3]];
        }

        // å†·é–€è™Ÿç¢¼ç­–ç•¥
        function getColdNumbers() {
            const counts = {};
            for (let i = 0; i <= 9; i++) counts[i] = 0;
            
            history.forEach(num => {
                for (let digit of num) counts[digit]++;
            });

            const sorted = Object.entries(counts)
                .sort((a, b) => a[1] - b[1])
                .map(([num]) => num);

            return [sorted[0], sorted[1], sorted[2], sorted[3]];
        }

        // å¹³è¡¡ç­–ç•¥
        function getBalancedNumbers() {
            const counts = {};
            for (let i = 0; i <= 9; i++) counts[i] = 0;
            
            history.forEach(num => {
                for (let digit of num) counts[digit]++;
            });

            const sorted = Object.entries(counts)
                .sort((a, b) => b[1] - a[1])
                .map(([num]) => num);

            return [sorted[0], sorted[4], sorted[5], sorted[9]];
        }

        // ä½ç½®å„ªåŒ–ç­–ç•¥
        function getPositionBasedNumbers() {
            const positions = [{}, {}, {}, {}];
            
            history.forEach(num => {
                for (let i = 0; i < 4; i++) {
                    const digit = num[i];
                    positions[i][digit] = (positions[i][digit] || 0) + 1;
                }
            });

            return positions.map(pos => {
                const sorted = Object.entries(pos)
                    .sort((a, b) => b[1] - a[1]);
                return sorted[0] ? sorted[0][0] : Math.floor(Math.random() * 10);
            });
        }

        // éš¨æ©Ÿç­–ç•¥ - ä½¿ç”¨ Crypto API çœŸéš¨æ©Ÿæ•¸
        function getRandomNumbers() {
            // ä½¿ç”¨å¯†ç¢¼å­¸ç­‰ç´šçš„éš¨æ©Ÿæ•¸ç”Ÿæˆå™¨
            const randomArray = new Uint32Array(4);
            crypto.getRandomValues(randomArray);
            
            // å°‡éš¨æ©Ÿæ•¸è½‰æ›ç‚º 0-9 çš„ç¯„åœ
            return Array.from(randomArray, num => num % 10);
        }
    </script>
</body>
</html>
